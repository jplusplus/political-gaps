(function(){angular.module("politicalGaps",["ngAnimate","ngTouch","ngSanitize","ngMessages","ngAria","restangular","ui.router","ui.bootstrap"])}).call(this),function(){angular.module("politicalGaps").service("webDevTec",function(){"ngInject";var t,e;t=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Angular UI Bootstrap",url:"http://angular-ui.github.io/bootstrap/",description:"Bootstrap components written in pure AngularJS by the AngularUI Team.",logo:"ui-bootstrap.png"},{title:"Sass (Node)",url:"https://github.com/sass/node-sass",description:"Node.js binding to libsass, the C version of the popular stylesheet preprocessor, Sass.",logo:"node-sass.png"},{title:"CoffeeScript",url:"http://coffeescript.org/",description:"CoffeeScript, 'a little language that compiles into JavaScript'.",logo:"coffeescript.png"}],e=function(){return t},this.getTec=e})}.call(this),function(){angular.module("politicalGaps").directive("navbar",function(){var t;return t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controllerAs:"vm",bindToController:!0}})}.call(this),function(){angular.module("politicalGaps").directive("acmeMalarkey",function(){var t,e,r;return t=["$log","githubContributor",function(t,e){"ngInject";var r,n,i;i=this,r=function(){return n().then(function(){t.info("Activated Contributors View")})},n=function(){return e.getContributors(10).then(function(t){return i.contributors=t,i.contributors})},i.contributors=[],r()}],r=function(t,e,r,n){var i,o;o=void 0,i=malarkey(e[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "}),e.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(t){i.type(t).pause()["delete"]()}),o=t.$watch("vm.contributors",function(){angular.forEach(n.contributors,function(t){i.type(t.login).pause()["delete"]()})}),t.$on("$destroy",function(){o()})},e={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:r,controller:t,controllerAs:"vm"}})}.call(this),function(){angular.module("politicalGaps").factory("githubContributor",["$log","$http",function(t,e){"ngInject";var r,n,i;return r="https://api.github.com/repos/Swiip/generator-gulp-angular",n=function(n){var i,o;return null==n&&(n=30),i=function(t){return t.data},o=function(e){t.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))},e.get(r+"/contributors?per_page="+n).then(i)["catch"](o)},i={apiHost:r,getContributors:n}}])}.call(this),function(){angular.module("politicalGaps").service("cluster",function(){return function(t,e,r){return null==r&&(r=10),function(e){var n,i,o,a,s;return n=clusters[e.cluster],n!==e?(a=e.x-n.x,s=e.y-n.y,i=Math.sqrt(a*a+s*s),o=r+n.radius,i!==o?(i=(i-o)/i*t,e.x-=a*=i,e.y-=s*=i):void 0):void 0}}}).service("collide",function(){return function(t,e,r){var n,i;return null==r&&(r=15),n=2,i=d3.geom.quadtree(e),function(e){var o,a,s,u,l;return l=10,o=e.x-l,a=e.x+l,s=e.y-l,u=e.y+l,i.visit(function(i,c,p,h,g){var d,f,m;return i.point&&i.point!==e&&(f=e.x-i.point.x,m=e.y-i.point.y,d=Math.sqrt(f*f+m*m),l=NODE_RADIUS+i.point.radius+(e.cluster===i.point.cluster?n:r),l>d&&(d=(d-l)/d*t,e.x-=f*=d,e.y-=m*=d,i.point.x+=f,i.point.y+=m)),c>a||o>h||p>u||s>g})}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("politicalGaps").directive("mainChart",["topics",function(e){"ngInject";return{scope:{mainChart:"=",topic:"="},link:function(r,n,i){var o;return new(o=function(){function i(){this.forceTicked=t(this.forceTicked,this),this.countWithData=t(this.countWithData,this),this.countNoData=t(this.countNoData,this),this.count=t(this.count,this),this.createLegend=t(this.createLegend,this),this.startSimulation=t(this.startSimulation,this),this.groupFrom=t(this.groupFrom,this),this.groups=t(this.groups,this),this.buildPerson=t(this.buildPerson,this),this.scaleX=t(this.scaleX,this),this.datum=t(this.datum,this),this.force=t(this.force,this),this.getSizes=t(this.getSizes,this),this.height=t(this.height,this),this.width=t(this.width,this),this.svg=this.el.append("svg"),this.legend=this.el.append("div").attr("class","main__chart__legend"),this.people=this.svg.append("g").attr("class","main__chart__people"),r.$watch("topic",function(t){return function(){return t.startSimulation()&&t.createLegend()}}(this))}return i.prototype._groups={},i.prototype.summary=r.mainChart.global,i.prototype.el=d3.select(n[0]),i.prototype.width=function(){return this._width=this._width||function(t){return function(){return t.getSizes()[0]}}(this)()},i.prototype.height=function(){return this._height=this._height||function(t){return function(){return t.getSizes()[1]}}(this)()},i.prototype.getSizes=function(){return[angular.element(n).width(),angular.element(n).height()]},i.prototype.force=function(){return this._force=this._force||function(t){return function(){return d3.forceSimulation().force("charge",d3.forceManyBody().strength(-4)).force("x",d3.forceX(function(t){return t().forceX()})).force("y",d3.forceY(function(t){return t().forceY()})).on("tick",t.forceTicked)}}(this)()},i.prototype.datum=function(){return this._datum=this._datum||function(t){return function(){var e,r,n,i;for(i=[],e=r=0,n=t.summary.total-1;n>=0?n>=r:r>=n;e=n>=0?++r:--r)i.push(t.buildPerson(e));return i}}(this)()},i.prototype.scaleX=function(){var t,e;return e=this.width()/this.groups().length*.5,t=this.width()-e,d3.scaleLinear().range([0,1]).range([e,t])},i.prototype.buildPerson=function(t){return function(e){return function(){var r;return r=e.groupFrom(t),{group:r,id:t,forceY:function(){return e.height()/2},forceX:function(){var n;return null==r?e.scaleX()(1):(n=e.groups().indexOf(e.groupFrom(t)),e.scaleX()(n/(e.groups().length-1)))},"class":function(){var n,i;return i=["main__chart__people__node","main__chart__people__node"],null!=r?(n=e.groups().indexOf(e.groupFrom(t)),i.push("main__chart__people__node--"+slug(r.toLowerCase())),i.push("main__chart__people__node--"+n)):i.push("main__chart__people__node--no-data"),i.join(" ")}}}}(this)},i.prototype.groups=function(t){return null==t&&(t=r.topic),this._groups[t]=this._groups[t]||function(r){return function(){var n;return n=_.chain(r.summary[t]).keys().filter(function(t){return r.count(t)>0}).sortBy(function(n){var i;return(null!=(i=e[t].groups[n])?i.order:void 0)||r.summary[t][n]}).value(),r.countNoData()>0&&n.push("No data"),n}}(this)()},i.prototype.groupFrom=function(t,e){var n,i;return null==e&&(e=r.topic),i=0,n=null,_.each(this.groups(e),function(r){return function(o){return t>=i&&t<i+r.summary[e][o]&&(n=o),i+=r.summary[e][o]}}(this)),n},i.prototype.startSimulation=function(){var t;return this.nodes=this.people.selectAll(".main__chart__people__node").data(this.datum(),function(t){return t().id}).attr("class",function(t){return t()["class"]()}),t=this.nodes.enter().append("circle").attr("r",4).attr("class",function(t){return t()["class"]()}),this.nodes=t.merge(this.nodes),this.force().nodes(this.datum()),this.force().alphaTarget(2).restart()},i.prototype.createLegend=function(){var t;return t=this.legend.selectAll(".main__chart__legend__group").data(this.groups()),t.enter().append("div").attr("class","main__chart__legend__group").merge(t).html(function(t){return function(n){var i;return[(null!=(i=e[r.topic].groups[n])?i.label:void 0)||n,Math.round(1e3*t.count(n)/t.summary.total)/10+"%"].join("<br />")}}(this)),t.exit().remove()},i.prototype.count=function(t){return this.summary[r.topic][t]||this.countNoData()},i.prototype.countNoData=function(){return this.summary.total-this.countWithData()},i.prototype.countWithData=function(){return _.chain(this.summary[r.topic]).values().sum().value()},i.prototype.forceTicked=function(){return this.nodes.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})},i}())}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("politicalGaps").controller("MainController",["summary","legislatures","$state","$stateParams","legislature_id","$scope",function(e,r,n,i,o,a){"ngInject";var s;return new(s=function(){function s(){this.uiOnParamsChanged=t(this.uiOnParamsChanged,this),a.$watch("main.legislature",function(t,e){return t!==e?n.go("main",{legislature_id_eq:t}):void 0})}return s.prototype.summary=e,s.prototype.legislatures=r,s.prototype.legislature=1*o,s.prototype.topic=i.topic,s.prototype.uiOnParamsChanged=function(t,e){return this.topic=t.topic},s}())}])}.call(this),function(){angular.module("politicalGaps").run(["$log",function(t){"ngInject";return t.debug("runBlock end")}])}.call(this),function(){angular.module("politicalGaps").config(["$stateProvider","$urlRouterProvider",function(t,e){"ngInject";return e.otherwise("/"),t.state("main",{url:"/:legislature_id_eq",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main",params:{legislature_id_eq:{value:null},topic:{dynamic:!0,value:"gender"}},resolve:{legislatures:["$http",function(t){return t.get("data/legislatures.json").then(function(t){return t.data})}],legislature_id:["$stateParams","legislatures",function(t,e){return t.legislature_id_eq||e[0].id}],summary:["$http","legislature_id",function(t,e){return t.get("data/summary-"+e+".json").then(function(t){return t.data})}]}})}])}.call(this),function(){angular.module("politicalGaps").constant("topics",{gender:{groups:{male:{label:"Male"},female:{label:"Female"},other:{label:"Other"}}},age_range:{groups:{"bellow-30":{label:"Bellow 30",order:0},"30-40":{label:"30 to 40",order:1},"40-50":{label:"40 to 50",order:2},"50-60":{label:"50 to 60",order:3},"60-70":{label:"60 to 70",order:4},"over-70":{label:"Over 70",order:5}}},political_leaning:{groups:{"Left wing":{},"Center-left (social democrat)":{},Green:{},"Center (liberal)":{},Conservative:{},"Far-right":{},Other:{}}},profession_category:{groups:{"Armed forces":{},"Private sector professional":{},"Civil servant":{},Farmer:{},"Journalist, public relations":{},Lawyer:{},"Manual worker, craftsman/woman":{},"Medical doctor, dentist, optician":{},Miner:{},Teacher:{},"University professor":{},Student:{},"No occupation":{},Other:{}}}})}.call(this),function(){angular.module("politicalGaps").config(["$logProvider","RestangularProvider",function(t,e){"ngInject";return t.debugEnabled(!0),e.setBaseUrl("http://www.jquestapp.com/political-gaps/api/v1/"),e.setRestangularFields({selfLink:"@id"})}])}.call(this),angular.module("politicalGaps").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class=main><div class="text-center main__heading"><h2 class=main__heading__title>Political Gaps</h2><p class=main__heading__title__description>How representative are our representatives?</p></div><form class="main__legislatures form-inline"><label>Diversity report for<select class=form-control ng-options="legislature.id as legislature.name group by legislature.country for legislature in main.legislatures" ng-model=main.legislature></select></label></form><div class="main__chart main__chart--{{ main.topic }}" ui-view main-chart=main.summary topic=main.topic></div><ul class="nav nav-pills main__tabs"><li class=nav-item><a class=nav-link ui-sref="main({topic: \'gender\'})" ui-sref-active=active>Gender</a></li><li class=nav-item><a class=nav-link ui-sref="main({topic: \'age_range\'})" ui-sref-active=active>Age</a></li><li class=nav-item><a class=nav-link ui-sref="main({topic: \'profession_category\'})" ui-sref-active=active>Occupation</a></li><li class=nav-item><a class=nav-link ui-sref="main({topic: \'political_leaning\'})" ui-sref-active=active>Political leaning</a></li></ul></div>')}]);
//# sourceMappingURL=../maps/scripts/app-6cabe5d366.js.map
