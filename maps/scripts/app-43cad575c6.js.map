{"version":3,"sources":["/source/index.config.js"],"names":["angular","module","call","this","bind","fn","me","apply","arguments","directive","topics","restrict","scope","summary","topic","link","el","attrs","MainChart","forceTicked","countWithData","countNoData","count","createLegend","startSimulation","groupFrom","groups","buildPerson","scaleX","datum","force","getSizes","height","width","svg","append","legend","attr","people","$watch","_this","prototype","_groups","global","d3","select","_width","_height","element","_force","forceSimulation","forceManyBody","strength","forceX","d","forceY","on","_datum","i","j","ref","results","total","push","max","min","length","scaleLinear","range","group","id","index","indexOf","class","k","slug","toLowerCase","join","_","chain","keys","filter","sortBy","ref1","order","value","memo","each","key","nodeEnter","nodes","selectAll","data","enter","merge","alphaTarget","restart","html","label","Math","round","exit","remove","values","sum","x","y","controller","legislature","$stateParams","$scope","MainChartController","uiOnParamsChanged","changedParams","transition","countries","legislatures","MainController","buildFilters","gs","getEndYearDelta","isHistoricalTerm","isOldTerm","isRecentTerm","getFilteredLegislatures","buildFilteredLegislatures","isFiltered","toggleFrom","toggleTerm","toggleDifficultyLevel","toggleCountryAlpha2","someTerm","someDifficultyLevel","someCountryAlpha2","matchTerm","matchDifficultyLevel","matchCountryAlpha2","isTerm","isDifficultyLevel","isCountryAlpha2","getTerm","getDifficultyLevel","getCountryAlpha2","hasTerm","hasDifficultyLevel","hasCountryAlpha2","resetTerm","resetDifficultyLevel","resetCountryAlpha2","_countryAlpha2","_difficultyLevel","_term","_legislatures","administrativeLevels","val","l","country","alpha2","difficulty_level","term","some","arr","splice","orderBy","completion","getTermEndYear","split","getCurrentYear","Date","getFullYear","target","pop","extend","head","map","uniq","c","name","difficultyLevels","sort","terms","reverse","run","$log","debug","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controllerAs","resolve","$http","get","then","r","len","end_date","start_date","find","display_name","params","dynamic","legislature_id","legislature_id_eq","constant","gender","male","female","other","age_range","bellow-30","30-40","40-50","50-60","60-70","over-70","political_leaning","Left wing","Center-left (social democrat)","Green","Center (liberal)","Conservative","Far-right","Other","profession_category","Armed forces","Private sector professional","Civil servant","Farmer","Journalist, public relations","Lawyer","Manual worker, craftsman/woman","Medical doctor, dentist, optician","Miner","Teacher","University professor","Student","No occupation","$logProvider","RestangularProvider","debugEnabled","setBaseUrl","setRestangularFields","selfLink","$templateCache","put"],"mappings":"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","file":"scripts/app-43cad575c6.js","sourcesContent":["(function() {\n  angular.module('politicalGaps', ['ngAnimate', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'restangular', 'ui.router', 'ui.bootstrap']);\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('politicalGaps').directive('mainChart', function(topics) {\n    'ngInject';\n    return {\n      restrict: 'A',\n      scope: {\n        summary: '=',\n        topic: '='\n      },\n      link: function(scope, el, attrs) {\n        var MainChart;\n        return new (MainChart = (function() {\n          MainChart.prototype._groups = {};\n\n          MainChart.prototype.summary = scope.summary.global;\n\n          MainChart.prototype.el = d3.select(el[0]);\n\n          MainChart.prototype.width = function() {\n            return this._width = this._width || (function(_this) {\n              return function() {\n                return _this.getSizes()[0];\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.height = function() {\n            return this._height = this._height || (function(_this) {\n              return function() {\n                return _this.getSizes()[1];\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.getSizes = function() {\n            return [angular.element(el).width(), angular.element(el).height()];\n          };\n\n          MainChart.prototype.force = function() {\n            return this._force = this._force || (function(_this) {\n              return function() {\n                return d3.forceSimulation().force(\"charge\", d3.forceManyBody().strength(-1)).force(\"x\", d3.forceX(function(d) {\n                  return d().forceX();\n                })).force(\"y\", d3.forceY(function(d) {\n                  return d().forceY();\n                })).on(\"tick\", _this.forceTicked);\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.datum = function() {\n            return this._datum = this._datum || (function(_this) {\n              return function() {\n                var i, j, ref, results;\n                results = [];\n                for (i = j = 0, ref = _this.summary.total - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n                  results.push(_this.buildPerson(i));\n                }\n                return results;\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.scaleX = function() {\n            var max, min;\n            min = this.width() / this.groups().length * .5;\n            max = this.width() - min;\n            return d3.scaleLinear().range([0, 1]).range([min, max]);\n          };\n\n          MainChart.prototype.buildPerson = function(i) {\n            return (function(_this) {\n              return function() {\n                var group;\n                group = _this.groupFrom(i);\n                return {\n                  group: group,\n                  id: i,\n                  forceY: function() {\n                    return _this.height() / 2;\n                  },\n                  forceX: function() {\n                    var index;\n                    if (group == null) {\n                      return _this.scaleX()(1);\n                    }\n                    index = _this.groups().indexOf(_this.groupFrom(i));\n                    return _this.scaleX()(index / (_this.groups().length - 1));\n                  },\n                  \"class\": function() {\n                    var index, k;\n                    k = [\"main__chart__people__node\", \"main__chart__people__node\"];\n                    if (group != null) {\n                      index = _this.groups().indexOf(_this.groupFrom(i));\n                      k.push(\"main__chart__people__node--\" + (slug(group.toLowerCase())));\n                      k.push(\"main__chart__people__node--\" + index);\n                    } else {\n                      k.push(\"main__chart__people__node--no-data\");\n                    }\n                    return k.join(\" \");\n                  }\n                };\n              };\n            })(this);\n          };\n\n          MainChart.prototype.groups = function(topic) {\n            if (topic == null) {\n              topic = scope.topic;\n            }\n            return this._groups[topic] = this._groups[topic] || (function(_this) {\n              return function() {\n                var groups;\n                groups = _.chain(_this.summary[topic]).keys().filter(function(d) {\n                  return _this.count(d) > 0;\n                }).sortBy(function(d) {\n                  var ref, ref1;\n                  if (((ref = topics[topic].groups[d]) != null ? ref.order : void 0) != null) {\n                    return (ref1 = topics[topic].groups[d]) != null ? ref1.order : void 0;\n                  } else {\n                    return _this.summary[topic][d];\n                  }\n                }).value();\n                if (_this.countNoData() > 0) {\n                  groups.push('No data');\n                }\n                return groups;\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.groupFrom = function(i, topic) {\n            var group, memo;\n            if (topic == null) {\n              topic = scope.topic;\n            }\n            memo = 0;\n            group = null;\n            _.each(this.groups(topic), (function(_this) {\n              return function(key) {\n                if (i >= memo && i < memo + _this.summary[topic][key]) {\n                  group = key;\n                }\n                return memo += _this.summary[topic][key];\n              };\n            })(this));\n            return group;\n          };\n\n          MainChart.prototype.startSimulation = function() {\n            var nodeEnter;\n            this.nodes = this.people.selectAll('.main__chart__people__node').data(this.datum(), function(d) {\n              return d().id;\n            }).attr(\"class\", function(d) {\n              return d()[\"class\"]();\n            });\n            nodeEnter = this.nodes.enter().append(\"circle\").attr(\"r\", 3).attr(\"class\", function(d) {\n              return d()[\"class\"]();\n            });\n            this.nodes = nodeEnter.merge(this.nodes);\n            this.force().nodes(this.datum());\n            return this.force().alphaTarget(2).restart();\n          };\n\n          MainChart.prototype.createLegend = function() {\n            var groups;\n            groups = this.legend.selectAll('.main__chart__legend__group').data(this.groups());\n            groups.enter().append('div').attr('class', 'main__chart__legend__group').merge(groups).html((function(_this) {\n              return function(d) {\n                var ref;\n                return ['<div>' + (((ref = topics[scope.topic].groups[d]) != null ? ref.label : void 0) || d) + '</div>', Math.round(10000 * _this.count(d) / _this.summary.total) / 100 + '%'].join(\"\");\n              };\n            })(this));\n            return groups.exit().remove();\n          };\n\n          MainChart.prototype.count = function(group) {\n            return this.summary[scope.topic][group] || this.countNoData();\n          };\n\n          MainChart.prototype.countNoData = function() {\n            return this.summary.total - this.countWithData();\n          };\n\n          MainChart.prototype.countWithData = function() {\n            return _.chain(this.summary[scope.topic]).values().sum().value();\n          };\n\n          MainChart.prototype.forceTicked = function() {\n            return this.nodes.attr(\"transform\", function(d) {\n              return \"translate(\" + d.x + \", \" + d.y + \")\";\n            });\n          };\n\n          function MainChart() {\n            this.forceTicked = bind(this.forceTicked, this);\n            this.countWithData = bind(this.countWithData, this);\n            this.countNoData = bind(this.countNoData, this);\n            this.count = bind(this.count, this);\n            this.createLegend = bind(this.createLegend, this);\n            this.startSimulation = bind(this.startSimulation, this);\n            this.groupFrom = bind(this.groupFrom, this);\n            this.groups = bind(this.groups, this);\n            this.buildPerson = bind(this.buildPerson, this);\n            this.scaleX = bind(this.scaleX, this);\n            this.datum = bind(this.datum, this);\n            this.force = bind(this.force, this);\n            this.getSizes = bind(this.getSizes, this);\n            this.height = bind(this.height, this);\n            this.width = bind(this.width, this);\n            this.svg = this.el.append(\"svg\");\n            this.legend = this.el.append(\"div\").attr(\"class\", \"main__chart__legend\");\n            this.people = this.svg.append(\"g\").attr(\"class\", \"main__chart__people\");\n            scope.$watch('topic', (function(_this) {\n              return function() {\n                return _this.startSimulation() && _this.createLegend();\n              };\n            })(this));\n          }\n\n          return MainChart;\n\n        })());\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('politicalGaps').controller('MainChartController', function(summary, legislature, $stateParams, $scope) {\n    'ngInject';\n    var MainChartController;\n    return new (MainChartController = (function() {\n      function MainChartController() {\n        this.uiOnParamsChanged = bind(this.uiOnParamsChanged, this);\n      }\n\n      MainChartController.prototype.summary = summary;\n\n      MainChartController.prototype.legislature = legislature;\n\n      MainChartController.prototype.topic = $stateParams.topic;\n\n      MainChartController.prototype.uiOnParamsChanged = function(changedParams, transition) {\n        return this.topic = changedParams.topic;\n      };\n\n      return MainChartController;\n\n    })());\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('politicalGaps').controller('MainController', function(countries, legislatures) {\n    'ngInject';\n    var MainController;\n    return new (MainController = (function() {\n      MainController.prototype._countryAlpha2 = [];\n\n      MainController.prototype._difficultyLevel = [];\n\n      MainController.prototype._term = [];\n\n      MainController.prototype._legislatures = [];\n\n      MainController.prototype.legislatures = legislatures;\n\n      MainController.prototype.administrativeLevels = ['National', 'Regional', 'Local'];\n\n      MainController.prototype.uiOnParamsChanged = function(changedParams, transition) {\n        return this.topic = changedParams.topic;\n      };\n\n      MainController.prototype.resetCountryAlpha2 = function() {\n        this._countryAlpha2 = [];\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.resetDifficultyLevel = function() {\n        this._difficultyLevel = [];\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.resetTerm = function() {\n        this._term = [];\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.hasCountryAlpha2 = function() {\n        return this._countryAlpha2.length;\n      };\n\n      MainController.prototype.hasDifficultyLevel = function() {\n        return this._difficultyLevel.length;\n      };\n\n      MainController.prototype.hasTerm = function() {\n        return this._term.length;\n      };\n\n      MainController.prototype.getCountryAlpha2 = function() {\n        return this._countryAlpha2;\n      };\n\n      MainController.prototype.getDifficultyLevel = function() {\n        return this._difficultyLevel;\n      };\n\n      MainController.prototype.getTerm = function() {\n        return this._term;\n      };\n\n      MainController.prototype.isCountryAlpha2 = function(val) {\n        return this._countryAlpha2.indexOf(val) > -1;\n      };\n\n      MainController.prototype.isDifficultyLevel = function(val) {\n        return this._difficultyLevel.indexOf(val) > -1;\n      };\n\n      MainController.prototype.isTerm = function(val) {\n        return this._term.indexOf(val) > -1;\n      };\n\n      MainController.prototype.matchCountryAlpha2 = function(val) {\n        return _.filter(this.getFilteredLegislatures(), function(l) {\n          return l.country.alpha2 === val;\n        });\n      };\n\n      MainController.prototype.matchDifficultyLevel = function(val) {\n        return _.filter(this.getFilteredLegislatures(), {\n          difficulty_level: val\n        });\n      };\n\n      MainController.prototype.matchTerm = function(val) {\n        return _.filter(this.getFilteredLegislatures(), {\n          term: val\n        });\n      };\n\n      MainController.prototype.someCountryAlpha2 = function(val) {\n        return _.some(this.getFilteredLegislatures(), function(l) {\n          return l.country.alpha2 === val;\n        });\n      };\n\n      MainController.prototype.someDifficultyLevel = function(val) {\n        return _.some(this.getFilteredLegislatures(), {\n          difficulty_level: val\n        });\n      };\n\n      MainController.prototype.someTerm = function(val) {\n        return _.some(this.getFilteredLegislatures(), {\n          term: val\n        });\n      };\n\n      MainController.prototype.toggleCountryAlpha2 = function(val) {\n        return this.toggleFrom(this._countryAlpha2, val);\n      };\n\n      MainController.prototype.toggleDifficultyLevel = function(val) {\n        return this.toggleFrom(this._difficultyLevel, val);\n      };\n\n      MainController.prototype.toggleTerm = function(val) {\n        return this.toggleFrom(this._term, val);\n      };\n\n      MainController.prototype.toggleFrom = function(arr, val) {\n        var index;\n        index = arr.indexOf(val);\n        if (index === -1) {\n          arr.push(val);\n        } else {\n          arr.splice(index, 1);\n        }\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.isFiltered = function(legislature) {\n        var filter;\n        filter = true;\n        filter && (filter = !this.hasCountryAlpha2() || this.isCountryAlpha2(legislature.country.alpha2));\n        filter && (filter = !this.hasDifficultyLevel() || this.isDifficultyLevel(legislature.difficulty_level));\n        filter && (filter = !this.hasTerm() || this.isTerm(legislature.term));\n        return filter;\n      };\n\n      MainController.prototype.buildFilteredLegislatures = function() {\n        this._legislatures = _.filter(legislatures, this.isFiltered);\n        return this._legislatures = _.orderBy(this._legislatures, function(l) {\n          return -1 * l.completion;\n        });\n      };\n\n      MainController.prototype.getFilteredLegislatures = function() {\n        return this._legislatures;\n      };\n\n      MainController.prototype.isRecentTerm = function(term) {\n        return this.getEndYearDelta(term) <= 0;\n      };\n\n      MainController.prototype.isOldTerm = function(term) {\n        return this.getEndYearDelta(term) > 0 && this.getEndYearDelta(term) <= 30;\n      };\n\n      MainController.prototype.isHistoricalTerm = function(term) {\n        return this.getEndYearDelta(term) > 30;\n      };\n\n      MainController.prototype.getTermEndYear = function(term) {\n        return 1 * term.split('-')[1];\n      };\n\n      MainController.prototype.getCurrentYear = function() {\n        return (new Date).getFullYear();\n      };\n\n      MainController.prototype.getEndYearDelta = function(term) {\n        return this.getCurrentYear() - this.getTermEndYear(term);\n      };\n\n      MainController.prototype.gs = function(target) {\n        var attr;\n        attr = this[\"_\" + target] || [];\n        return (function(_this) {\n          return function(val) {\n            if (val === null) {\n              while (attr.length > 0) {\n                attr.pop();\n              }\n              _this.buildFilteredLegislatures();\n            } else if (val != null) {\n              angular.extend(attr, [val]);\n              _this.buildFilteredLegislatures();\n            }\n            return _.head(attr);\n          };\n        })(this);\n      };\n\n      MainController.prototype.buildFilters = function() {\n        this.countries = _.chain(legislatures).map('country').uniq().sortBy(function(c) {\n          return c.name;\n        }).value();\n        this.difficultyLevels = _.chain(legislatures).map('difficulty_level').uniq().sort().value();\n        this.terms = _.chain(legislatures).map('term').uniq().sort().reverse().value();\n        return this.buildFilteredLegislatures();\n      };\n\n      function MainController() {\n        this.buildFilters = bind(this.buildFilters, this);\n        this.gs = bind(this.gs, this);\n        this.getEndYearDelta = bind(this.getEndYearDelta, this);\n        this.isHistoricalTerm = bind(this.isHistoricalTerm, this);\n        this.isOldTerm = bind(this.isOldTerm, this);\n        this.isRecentTerm = bind(this.isRecentTerm, this);\n        this.getFilteredLegislatures = bind(this.getFilteredLegislatures, this);\n        this.buildFilteredLegislatures = bind(this.buildFilteredLegislatures, this);\n        this.isFiltered = bind(this.isFiltered, this);\n        this.toggleFrom = bind(this.toggleFrom, this);\n        this.toggleTerm = bind(this.toggleTerm, this);\n        this.toggleDifficultyLevel = bind(this.toggleDifficultyLevel, this);\n        this.toggleCountryAlpha2 = bind(this.toggleCountryAlpha2, this);\n        this.someTerm = bind(this.someTerm, this);\n        this.someDifficultyLevel = bind(this.someDifficultyLevel, this);\n        this.someCountryAlpha2 = bind(this.someCountryAlpha2, this);\n        this.matchTerm = bind(this.matchTerm, this);\n        this.matchDifficultyLevel = bind(this.matchDifficultyLevel, this);\n        this.matchCountryAlpha2 = bind(this.matchCountryAlpha2, this);\n        this.isTerm = bind(this.isTerm, this);\n        this.isDifficultyLevel = bind(this.isDifficultyLevel, this);\n        this.isCountryAlpha2 = bind(this.isCountryAlpha2, this);\n        this.getTerm = bind(this.getTerm, this);\n        this.getDifficultyLevel = bind(this.getDifficultyLevel, this);\n        this.getCountryAlpha2 = bind(this.getCountryAlpha2, this);\n        this.hasTerm = bind(this.hasTerm, this);\n        this.hasDifficultyLevel = bind(this.hasDifficultyLevel, this);\n        this.hasCountryAlpha2 = bind(this.hasCountryAlpha2, this);\n        this.resetTerm = bind(this.resetTerm, this);\n        this.resetDifficultyLevel = bind(this.resetDifficultyLevel, this);\n        this.resetCountryAlpha2 = bind(this.resetCountryAlpha2, this);\n        this.uiOnParamsChanged = bind(this.uiOnParamsChanged, this);\n        this.buildFilters();\n      }\n\n      return MainController;\n\n    })());\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').run(function($log) {\n    'ngInject';\n    return $log.debug('runBlock end');\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').config(function($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $urlRouterProvider.otherwise('/');\n    $stateProvider.state('main', {\n      url: '/',\n      templateUrl: 'app/main/main.html',\n      controller: 'MainController',\n      controllerAs: 'main',\n      resolve: {\n        countries: function($http) {\n          'ngInject';\n          return $http.get('data/countries.json').then(function(r) {\n            return r.data;\n          });\n        },\n        legislatures: function($http, countries) {\n          'ngInject';\n          return $http.get('data/legislatures.json').then(function(r) {\n            var i, legislature, len, ref;\n            ref = r.data;\n            for (i = 0, len = ref.length; i < len; i++) {\n              legislature = ref[i];\n              legislature.end_date = new Date(legislature.end_date);\n              legislature.start_date = new Date(legislature.start_date);\n              legislature.country = _.find(countries, {\n                alpha2: legislature.country\n              });\n              legislature.term = (legislature.start_date.getFullYear()) + \"-\" + (legislature.end_date.getFullYear());\n              legislature.display_name = legislature.name;\n              legislature.display_name += ' - ';\n              legislature.display_name += 'Completion rate: ';\n              legislature.display_name += ~~(legislature.completion * 1000) / 10;\n              legislature.display_name += '%';\n            }\n            return r.data;\n          });\n        }\n      }\n    });\n    return $stateProvider.state('main.chart', {\n      url: ':legislature_id_eq',\n      templateUrl: 'app/main/chart/chart.html',\n      controller: 'MainChartController',\n      controllerAs: 'chart',\n      params: {\n        topic: {\n          dynamic: true,\n          value: 'gender'\n        }\n      },\n      resolve: {\n        legislature_id: function($stateParams) {\n          'ngInject';\n          return 1 * $stateParams.legislature_id_eq;\n        },\n        legislature: function(legislatures, legislature_id) {\n          'ngInject';\n          return _.find(legislatures, {\n            id: legislature_id\n          });\n        },\n        summary: function($http, legislature_id) {\n          'ngInject';\n          return $http.get('data/summary-' + legislature_id + '.json').then(function(r) {\n            return r.data;\n          });\n        }\n      }\n    });\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').constant('topics', {\n    gender: {\n      groups: {\n        male: {\n          label: \"Male\"\n        },\n        female: {\n          label: \"Female\"\n        },\n        other: {\n          label: \"Other\"\n        }\n      }\n    },\n    age_range: {\n      groups: {\n        'bellow-30': {\n          label: 'Under 30',\n          order: 0\n        },\n        '30-40': {\n          label: '30 to 40',\n          order: 1\n        },\n        '40-50': {\n          label: '40 to 50',\n          order: 2\n        },\n        '50-60': {\n          label: '50 to 60',\n          order: 3\n        },\n        '60-70': {\n          label: '60 to 70',\n          order: 4\n        },\n        'over-70': {\n          label: 'Over 70',\n          order: 5\n        }\n      }\n    },\n    political_leaning: {\n      groups: {\n        'Left wing': {},\n        'Center-left (social democrat)': {},\n        'Green': {},\n        'Center (liberal)': {},\n        'Conservative': {},\n        'Far-right': {},\n        'Other': {}\n      }\n    },\n    profession_category: {\n      groups: {\n        'Armed forces': {},\n        'Private sector professional': {},\n        'Civil servant': {},\n        'Farmer': {},\n        'Journalist, public relations': {},\n        'Lawyer': {},\n        'Manual worker, craftsman/woman': {},\n        'Medical doctor, dentist, optician': {},\n        'Miner': {},\n        'Teacher': {},\n        'University professor': {},\n        'Student': {},\n        'No occupation': {},\n        'Other': {}\n      }\n    }\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').config(function($logProvider, RestangularProvider) {\n    'ngInject';\n    $logProvider.debugEnabled(true);\n    RestangularProvider.setBaseUrl('http://www.jquestapp.com/political-gaps/api/v1/');\n    return RestangularProvider.setRestangularFields({\n      selfLink: '@id'\n    });\n  });\n\n}).call(this);\n\n\n\nangular.module(\"politicalGaps\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=main><form class=main__elastic ng-show=\\\"\\'main\\' | isState\\\"><div class=main__elastic__introduction><div class=container><h1>Political Gaps</h1><p class=lead>How representative (or not) are our parliaments? PoliticalGaps is the first investigation on <a href=http://www.jquestapp.com target=_blank>jQuest</a>, a platform for journalism schools that lets journalism students in Europe learn datajournalism, connect with one another and investigate collaboratively.</p><p class=lead>We are investigating the representativity of elected officials in assemblies all over Europe. The data you see here is live. The database will grow more complete as the academic year continues.</p></div></div><div class=main__elastic__filters><div class=container><h3 class=main__elastic__filters__heading>Filter legislatures</h3><p class=lead>Use the filters to select a legislature and visualize the data collected on the representatives.</p><div class=hidden-md-up><div class=form-group><label for=input-country>By country</label><select ng-options=\\\"country.alpha2 as country.name for country in ::main.countries\\\" ng-model=\\\"main.gs(\\'countryAlpha2\\')\\\" ng-model-options=\\\"{ getterSetter: true }\\\" class=form-control id=input-country><option value=\\\"\\\">All</option></select></div><div class=form-group><label for=input-difficulty-level>By administrative levels</label><select ng-options=\\\"level as main.administrativeLevels[level - 1] for level in ::main.difficultyLevels\\\" ng-model=\\\"main.gs(\\'difficultyLevel\\')\\\" ng-model-options=\\\"{ getterSetter: true }\\\" class=form-control id=input-difficulty-level><option value=\\\"\\\">All</option></select></div><div class=form-group><label for=input-term>By term</label><select ng-options=\\\"term as term for term in ::main.terms\\\" ng-model=\\\"main.gs(\\'term\\')\\\" ng-model-options=\\\"{ getterSetter: true }\\\" class=form-control id=input-term><option value=\\\"\\\">All</option></select></div></div><div class=\\\"row hidden-sm-down\\\"><div class=col-sm-4><div class=main__elastic__filters__card><h4 class=main__elastic__filters__title><button class=\\\"btn btn-link btn-sm pull-xs-right\\\" ng-click=main.resetCountryAlpha2() ng-if=main.hasCountryAlpha2()>All</button> Country</h4><ul class=\\\"list-unstyled main__elastic__list main__elastic__list--country\\\"><li ng-repeat=\\\"country in ::main.countries\\\"><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleCountryAlpha2(country.alpha2) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isCountryAlpha2(country.alpha2),\\n                            \\'main__elastic__list__item--reduced\\': !main.someCountryAlpha2(country.alpha2)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchCountryAlpha2(country.alpha2).length }} </span>{{ country.name }}</a></li></ul></div></div><div class=col-sm-4><div class=main__elastic__filters__card><h4 class=main__elastic__filters__title><button class=\\\"btn btn-link btn-sm pull-xs-right\\\" ng-click=main.resetDifficultyLevel() ng-if=main.hasDifficultyLevel()>All</button> Administrative level</h4><ul class=\\\"list-unstyled main__elastic__list main__elastic__list--administrative-level\\\"><li ng-repeat=\\\"difficultyLevel in ::main.difficultyLevels\\\"><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleDifficultyLevel(difficultyLevel) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isDifficultyLevel(difficultyLevel),\\n                            \\'main__elastic__list__item--reduced\\': !main.someDifficultyLevel(difficultyLevel)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchDifficultyLevel(difficultyLevel).length }} </span>{{ main.administrativeLevels[difficultyLevel - 1] }}</a></li></ul></div></div><div class=col-sm-4><div class=main__elastic__filters__card><h4 class=main__elastic__filters__title><button class=\\\"btn btn-link btn-sm pull-xs-right\\\" ng-click=main.resetTerm() ng-if=main.hasTerm()>All</button> Term</h4><ul class=\\\"list-unstyled main__elastic__list main__elastic__list--term\\\"><li ng-repeat=\\\"term in main.terms | filter:main.isRecentTerm | filter:main.someTerm\\\"><div class=main__elastic__list__title ng-if=$first>Recent</div><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleTerm(term) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isTerm(term)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchTerm(term).length }} </span>{{ term }}</a></li><li ng-repeat=\\\"term in main.terms | filter:main.isOldTerm | filter:main.someTerm\\\"><div class=main__elastic__list__title ng-if=$first>Old</div><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleTerm(term) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isTerm(term)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchTerm(term).length }} </span>{{ term }}</a></li><li ng-repeat=\\\"term in main.terms | filter:main.isHistoricalTerm | filter:main.someTerm\\\"><div class=main__elastic__list__title ng-if=$first>Historical</div><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleTerm(term) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isTerm(term)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchTerm(term).length }} </span>{{ term }}</a></li></ul></div></div></div></div><div class=main__elastic__filters__alert><div class=container><i class=\\\"fa fa-filter\\\"></i> There is {{ main.getFilteredLegislatures().length }} results that match with your filters.</div></div></div><div class=container><ul class=list-unstyled><li ng-repeat=\\\"legislature in main.getFilteredLegislatures()\\\" class=main__elastic__card ui-sref=\\\"main.chart({ legislature_id_eq: legislature.id })\\\"><div class=\\\"pull-sm-right hidden-sm-down\\\"><button class=\\\"btn btn-link btn-outline\\\">Visualize representativity</button></div><h5>{{ legislature.name_english }}</h5><p>{{ legislature.territory }} - {{ legislature.term }} - Completed at {{ legislature.completion * 100 | number:0 }}%</p><div class=main__elastic__card__progress><div class=main__elastic__card__progress__bar ng-style=\\\"{ width: legislature.completion * 100 + \\'%\\' }\\\"></div></div></li></ul></div></form><div ui-view></div></div>\");\n$templateCache.put(\"app/main/chart/chart.html\",\"<div class=\\\"text-center main__heading\\\"><a class=main__heading__filters ui-sref=main><i class=\\\"fa fa-caret-down fa-fw\\\"></i> See the representativity of another assembly</a><div class=main__heading__title><h3>{{ chart.legislature.name_english }}</h3><p class=\\\"lead m-b-0\\\">{{ chart.legislature.country.name }} - {{ chart.legislature.term }} - Completed at {{ chart.legislature.completion * 100 | number:0 }}%</p></div><ul class=\\\"nav nav-pills main__heading__tabs\\\"><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'gender\\'})\\\" ui-sref-active=active>Gender</a></li><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'age_range\\'})\\\" ui-sref-active=active>Age</a></li><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'profession_category\\'})\\\" ui-sref-active=active>Occupation</a></li><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'political_leaning\\'})\\\" ui-sref-active=active>Political leaning</a></li></ul></div><div class=\\\"main__chart main__chart--{{ chart.topic }}\\\" main-chart summary=chart.summary topic=chart.topic></div>\");}]);"],"sourceRoot":"/source/"}