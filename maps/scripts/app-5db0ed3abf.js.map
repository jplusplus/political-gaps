{"version":3,"sources":["/source/index.config.js"],"names":["angular","module","call","this","directive","$window","restrict","link","scope","el","document","documentMode","element","addClass","Stickyfill","bind","fn","me","apply","arguments","topics","summary","topic","attrs","MainChart","forceTicked","countWithData","countNoData","count","createLegend","startSimulation","groupFrom","groups","buildPerson","scaleX","datum","force","getSizes","height","width","svg","append","legend","attr","people","$watch","_this","prototype","_groups","global","d3","select","_width","_height","_force","forceSimulation","forceManyBody","strength","forceX","d","forceY","on","_datum","i","j","ref","results","total","push","max","min","length","scaleLinear","range","group","id","index","indexOf","class","k","slug","toLowerCase","join","_","chain","keys","filter","sortBy","ref1","order","value","memo","each","key","nodeEnter","nodes","selectAll","data","enter","merge","alphaTarget","restart","html","label","Math","round","exit","remove","values","sum","x","y","controller","legislature","$stateParams","$scope","MainChartController","uiOnParamsChanged","changedParams","transition","countries","legislatures","MainController","buildFilters","getEndYearDelta","isHistoricalTerm","isOldTerm","isRecentTerm","getFilteredLegislatures","buildFilteredLegislatures","isFiltered","toggleFrom","toggleTerm","toggleDifficultyLevel","toggleCountryAlpha2","someTerm","someDifficultyLevel","someCountryAlpha2","matchTerm","matchDifficultyLevel","matchCountryAlpha2","isTerm","isDifficultyLevel","isCountryAlpha2","getTerm","getDifficultyLevel","getCountryAlpha2","hasTerm","hasDifficultyLevel","hasCountryAlpha2","resetTerm","resetDifficultyLevel","resetCountryAlpha2","_countryAlpha2","_difficultyLevel","_term","_legislatures","administrativeLevels","val","l","country","alpha2","difficulty_level","term","some","arr","splice","orderBy","completion","getTermEndYear","split","getCurrentYear","Date","getFullYear","map","uniq","c","name","difficultyLevels","sort","terms","reverse","run","$log","debug","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controllerAs","resolve","$http","get","then","r","len","end_date","start_date","find","display_name","params","dynamic","legislature_id","legislature_id_eq","constant","gender","male","female","other","age_range","bellow-30","30-40","40-50","50-60","60-70","over-70","political_leaning","Left wing","Center-left (social democrat)","Green","Center (liberal)","Conservative","Far-right","Other","profession_category","Armed forces","Private sector professional","Civil servant","Farmer","Journalist, public relations","Lawyer","Manual worker, craftsman/woman","Medical doctor, dentist, optician","Miner","Teacher","University professor","Student","No occupation","$logProvider","RestangularProvider","debugEnabled","setBaseUrl","setRestangularFields","selfLink","$templateCache","put"],"mappings":"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","file":"scripts/app-5db0ed3abf.js","sourcesContent":["(function() {\n  angular.module('politicalGaps', ['ngAnimate', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'restangular', 'ui.router', 'ui.bootstrap']);\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').directive('sticky', function($window) {\n    return {\n      restrict: 'AC',\n      link: function(scope, el) {\n        if (document.documentMode == null) {\n          return angular.element(el).addClass('sticky').Stickyfill();\n        }\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('politicalGaps').directive('mainChart', function(topics) {\n    'ngInject';\n    return {\n      restrict: 'A',\n      scope: {\n        summary: '=',\n        topic: '='\n      },\n      link: function(scope, el, attrs) {\n        var MainChart;\n        return new (MainChart = (function() {\n          MainChart.prototype._groups = {};\n\n          MainChart.prototype.summary = scope.summary.global;\n\n          MainChart.prototype.el = d3.select(el[0]);\n\n          MainChart.prototype.width = function() {\n            return this._width = this._width || (function(_this) {\n              return function() {\n                return _this.getSizes()[0];\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.height = function() {\n            return this._height = this._height || (function(_this) {\n              return function() {\n                return _this.getSizes()[1];\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.getSizes = function() {\n            return [angular.element(el).width(), angular.element(el).height()];\n          };\n\n          MainChart.prototype.force = function() {\n            return this._force = this._force || (function(_this) {\n              return function() {\n                return d3.forceSimulation().force(\"charge\", d3.forceManyBody().strength(-1)).force(\"x\", d3.forceX(function(d) {\n                  return d().forceX();\n                })).force(\"y\", d3.forceY(function(d) {\n                  return d().forceY();\n                })).on(\"tick\", _this.forceTicked);\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.datum = function() {\n            return this._datum = this._datum || (function(_this) {\n              return function() {\n                var i, j, ref, results;\n                results = [];\n                for (i = j = 0, ref = _this.summary.total - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n                  results.push(_this.buildPerson(i));\n                }\n                return results;\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.scaleX = function() {\n            var max, min;\n            min = this.width() / this.groups().length * .5;\n            max = this.width() - min;\n            return d3.scaleLinear().range([0, 1]).range([min, max]);\n          };\n\n          MainChart.prototype.buildPerson = function(i) {\n            return (function(_this) {\n              return function() {\n                var group;\n                group = _this.groupFrom(i);\n                return {\n                  group: group,\n                  id: i,\n                  forceY: function() {\n                    return _this.height() / 2;\n                  },\n                  forceX: function() {\n                    var index;\n                    if (group == null) {\n                      return _this.scaleX()(1);\n                    }\n                    index = _this.groups().indexOf(_this.groupFrom(i));\n                    return _this.scaleX()(index / (_this.groups().length - 1));\n                  },\n                  \"class\": function() {\n                    var index, k;\n                    k = [\"main__chart__people__node\", \"main__chart__people__node\"];\n                    if (group != null) {\n                      index = _this.groups().indexOf(_this.groupFrom(i));\n                      k.push(\"main__chart__people__node--\" + (slug(group.toLowerCase())));\n                      k.push(\"main__chart__people__node--\" + index);\n                    } else {\n                      k.push(\"main__chart__people__node--no-data\");\n                    }\n                    return k.join(\" \");\n                  }\n                };\n              };\n            })(this);\n          };\n\n          MainChart.prototype.groups = function(topic) {\n            if (topic == null) {\n              topic = scope.topic;\n            }\n            return this._groups[topic] = this._groups[topic] || (function(_this) {\n              return function() {\n                var groups;\n                groups = _.chain(_this.summary[topic]).keys().filter(function(d) {\n                  return _this.count(d) > 0;\n                }).sortBy(function(d) {\n                  var ref, ref1;\n                  if (((ref = topics[topic].groups[d]) != null ? ref.order : void 0) != null) {\n                    return (ref1 = topics[topic].groups[d]) != null ? ref1.order : void 0;\n                  } else {\n                    return _this.summary[topic][d];\n                  }\n                }).value();\n                if (_this.countNoData() > 0) {\n                  groups.push('No data');\n                }\n                return groups;\n              };\n            })(this)();\n          };\n\n          MainChart.prototype.groupFrom = function(i, topic) {\n            var group, memo;\n            if (topic == null) {\n              topic = scope.topic;\n            }\n            memo = 0;\n            group = null;\n            _.each(this.groups(topic), (function(_this) {\n              return function(key) {\n                if (i >= memo && i < memo + _this.summary[topic][key]) {\n                  group = key;\n                }\n                return memo += _this.summary[topic][key];\n              };\n            })(this));\n            return group;\n          };\n\n          MainChart.prototype.startSimulation = function() {\n            var nodeEnter;\n            this.nodes = this.people.selectAll('.main__chart__people__node').data(this.datum(), function(d) {\n              return d().id;\n            }).attr(\"class\", function(d) {\n              return d()[\"class\"]();\n            });\n            nodeEnter = this.nodes.enter().append(\"circle\").attr(\"r\", 3).attr(\"class\", function(d) {\n              return d()[\"class\"]();\n            });\n            this.nodes = nodeEnter.merge(this.nodes);\n            this.force().nodes(this.datum());\n            return this.force().alphaTarget(2).restart();\n          };\n\n          MainChart.prototype.createLegend = function() {\n            var groups;\n            groups = this.legend.selectAll('.main__chart__legend__group').data(this.groups());\n            groups.enter().append('div').attr('class', 'main__chart__legend__group').merge(groups).html((function(_this) {\n              return function(d) {\n                var ref;\n                return ['<div>' + (((ref = topics[scope.topic].groups[d]) != null ? ref.label : void 0) || d) + '</div>', Math.round(10000 * _this.count(d) / _this.summary.total) / 100 + '%'].join(\"\");\n              };\n            })(this));\n            return groups.exit().remove();\n          };\n\n          MainChart.prototype.count = function(group) {\n            return this.summary[scope.topic][group] || this.countNoData();\n          };\n\n          MainChart.prototype.countNoData = function() {\n            return this.summary.total - this.countWithData();\n          };\n\n          MainChart.prototype.countWithData = function() {\n            return _.chain(this.summary[scope.topic]).values().sum().value();\n          };\n\n          MainChart.prototype.forceTicked = function() {\n            return this.nodes.attr(\"transform\", function(d) {\n              return \"translate(\" + d.x + \", \" + d.y + \")\";\n            });\n          };\n\n          function MainChart() {\n            this.forceTicked = bind(this.forceTicked, this);\n            this.countWithData = bind(this.countWithData, this);\n            this.countNoData = bind(this.countNoData, this);\n            this.count = bind(this.count, this);\n            this.createLegend = bind(this.createLegend, this);\n            this.startSimulation = bind(this.startSimulation, this);\n            this.groupFrom = bind(this.groupFrom, this);\n            this.groups = bind(this.groups, this);\n            this.buildPerson = bind(this.buildPerson, this);\n            this.scaleX = bind(this.scaleX, this);\n            this.datum = bind(this.datum, this);\n            this.force = bind(this.force, this);\n            this.getSizes = bind(this.getSizes, this);\n            this.height = bind(this.height, this);\n            this.width = bind(this.width, this);\n            this.svg = this.el.append(\"svg\");\n            this.legend = this.el.append(\"div\").attr(\"class\", \"main__chart__legend\");\n            this.people = this.svg.append(\"g\").attr(\"class\", \"main__chart__people\");\n            scope.$watch('topic', (function(_this) {\n              return function() {\n                return _this.startSimulation() && _this.createLegend();\n              };\n            })(this));\n          }\n\n          return MainChart;\n\n        })());\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('politicalGaps').controller('MainChartController', function(summary, legislature, $stateParams, $scope) {\n    'ngInject';\n    var MainChartController;\n    return new (MainChartController = (function() {\n      function MainChartController() {\n        this.uiOnParamsChanged = bind(this.uiOnParamsChanged, this);\n      }\n\n      MainChartController.prototype.summary = summary;\n\n      MainChartController.prototype.legislature = legislature;\n\n      MainChartController.prototype.topic = $stateParams.topic;\n\n      MainChartController.prototype.uiOnParamsChanged = function(changedParams, transition) {\n        return this.topic = changedParams.topic;\n      };\n\n      return MainChartController;\n\n    })());\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('politicalGaps').controller('MainController', function(countries, legislatures) {\n    'ngInject';\n    var MainController;\n    return new (MainController = (function() {\n      MainController.prototype._countryAlpha2 = [];\n\n      MainController.prototype._difficultyLevel = [];\n\n      MainController.prototype._term = [];\n\n      MainController.prototype._legislatures = [];\n\n      MainController.prototype.legislatures = legislatures;\n\n      MainController.prototype.administrativeLevels = ['National', 'Regional', 'Local'];\n\n      MainController.prototype.uiOnParamsChanged = function(changedParams, transition) {\n        return this.topic = changedParams.topic;\n      };\n\n      MainController.prototype.resetCountryAlpha2 = function() {\n        this._countryAlpha2 = [];\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.resetDifficultyLevel = function() {\n        this._difficultyLevel = [];\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.resetTerm = function() {\n        this._term = [];\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.hasCountryAlpha2 = function() {\n        return this._countryAlpha2.length;\n      };\n\n      MainController.prototype.hasDifficultyLevel = function() {\n        return this._difficultyLevel.length;\n      };\n\n      MainController.prototype.hasTerm = function() {\n        return this._term.length;\n      };\n\n      MainController.prototype.getCountryAlpha2 = function() {\n        return this._countryAlpha2;\n      };\n\n      MainController.prototype.getDifficultyLevel = function() {\n        return this._difficultyLevel;\n      };\n\n      MainController.prototype.getTerm = function() {\n        return this._term;\n      };\n\n      MainController.prototype.isCountryAlpha2 = function(val) {\n        return this._countryAlpha2.indexOf(val) > -1;\n      };\n\n      MainController.prototype.isDifficultyLevel = function(val) {\n        return this._difficultyLevel.indexOf(val) > -1;\n      };\n\n      MainController.prototype.isTerm = function(val) {\n        return this._term.indexOf(val) > -1;\n      };\n\n      MainController.prototype.matchCountryAlpha2 = function(val) {\n        return _.filter(this.getFilteredLegislatures(), function(l) {\n          return l.country.alpha2 === val;\n        });\n      };\n\n      MainController.prototype.matchDifficultyLevel = function(val) {\n        return _.filter(this.getFilteredLegislatures(), {\n          difficulty_level: val\n        });\n      };\n\n      MainController.prototype.matchTerm = function(val) {\n        return _.filter(this.getFilteredLegislatures(), {\n          term: val\n        });\n      };\n\n      MainController.prototype.someCountryAlpha2 = function(val) {\n        return _.some(this.getFilteredLegislatures(), function(l) {\n          return l.country.alpha2 === val;\n        });\n      };\n\n      MainController.prototype.someDifficultyLevel = function(val) {\n        return _.some(this.getFilteredLegislatures(), {\n          difficulty_level: val\n        });\n      };\n\n      MainController.prototype.someTerm = function(val) {\n        return _.some(this.getFilteredLegislatures(), {\n          term: val\n        });\n      };\n\n      MainController.prototype.toggleCountryAlpha2 = function(val) {\n        return this.toggleFrom(this._countryAlpha2, val);\n      };\n\n      MainController.prototype.toggleDifficultyLevel = function(val) {\n        return this.toggleFrom(this._difficultyLevel, val);\n      };\n\n      MainController.prototype.toggleTerm = function(val) {\n        return this.toggleFrom(this._term, val);\n      };\n\n      MainController.prototype.toggleFrom = function(arr, val) {\n        var index;\n        index = arr.indexOf(val);\n        if (index === -1) {\n          arr.push(val);\n        } else {\n          arr.splice(index, 1);\n        }\n        return this.buildFilteredLegislatures();\n      };\n\n      MainController.prototype.isFiltered = function(legislature) {\n        var filter;\n        filter = true;\n        filter && (filter = !this.hasCountryAlpha2() || this.isCountryAlpha2(legislature.country.alpha2));\n        filter && (filter = !this.hasDifficultyLevel() || this.isDifficultyLevel(legislature.difficulty_level));\n        filter && (filter = !this.hasTerm() || this.isTerm(legislature.term));\n        return filter;\n      };\n\n      MainController.prototype.buildFilteredLegislatures = function() {\n        this._legislatures = _.filter(legislatures, this.isFiltered);\n        return this._legislatures = _.orderBy(this._legislatures, function(l) {\n          return -1 * l.completion;\n        });\n      };\n\n      MainController.prototype.getFilteredLegislatures = function() {\n        return this._legislatures;\n      };\n\n      MainController.prototype.isRecentTerm = function(term) {\n        return this.getEndYearDelta(term) <= 0;\n      };\n\n      MainController.prototype.isOldTerm = function(term) {\n        return this.getEndYearDelta(term) > 0 && this.getEndYearDelta(term) <= 30;\n      };\n\n      MainController.prototype.isHistoricalTerm = function(term) {\n        return this.getEndYearDelta(term) > 30;\n      };\n\n      MainController.prototype.getTermEndYear = function(term) {\n        return 1 * term.split('-')[1];\n      };\n\n      MainController.prototype.getCurrentYear = function() {\n        return (new Date).getFullYear();\n      };\n\n      MainController.prototype.getEndYearDelta = function(term) {\n        return this.getCurrentYear() - this.getTermEndYear(term);\n      };\n\n      MainController.prototype.buildFilters = function() {\n        this.countries = _.chain(legislatures).map('country').uniq().sortBy(function(c) {\n          return c.name;\n        }).value();\n        this.difficultyLevels = _.chain(legislatures).map('difficulty_level').uniq().sort().value();\n        this.terms = _.chain(legislatures).map('term').uniq().sort().reverse().value();\n        return this.buildFilteredLegislatures();\n      };\n\n      function MainController() {\n        this.buildFilters = bind(this.buildFilters, this);\n        this.getEndYearDelta = bind(this.getEndYearDelta, this);\n        this.isHistoricalTerm = bind(this.isHistoricalTerm, this);\n        this.isOldTerm = bind(this.isOldTerm, this);\n        this.isRecentTerm = bind(this.isRecentTerm, this);\n        this.getFilteredLegislatures = bind(this.getFilteredLegislatures, this);\n        this.buildFilteredLegislatures = bind(this.buildFilteredLegislatures, this);\n        this.isFiltered = bind(this.isFiltered, this);\n        this.toggleFrom = bind(this.toggleFrom, this);\n        this.toggleTerm = bind(this.toggleTerm, this);\n        this.toggleDifficultyLevel = bind(this.toggleDifficultyLevel, this);\n        this.toggleCountryAlpha2 = bind(this.toggleCountryAlpha2, this);\n        this.someTerm = bind(this.someTerm, this);\n        this.someDifficultyLevel = bind(this.someDifficultyLevel, this);\n        this.someCountryAlpha2 = bind(this.someCountryAlpha2, this);\n        this.matchTerm = bind(this.matchTerm, this);\n        this.matchDifficultyLevel = bind(this.matchDifficultyLevel, this);\n        this.matchCountryAlpha2 = bind(this.matchCountryAlpha2, this);\n        this.isTerm = bind(this.isTerm, this);\n        this.isDifficultyLevel = bind(this.isDifficultyLevel, this);\n        this.isCountryAlpha2 = bind(this.isCountryAlpha2, this);\n        this.getTerm = bind(this.getTerm, this);\n        this.getDifficultyLevel = bind(this.getDifficultyLevel, this);\n        this.getCountryAlpha2 = bind(this.getCountryAlpha2, this);\n        this.hasTerm = bind(this.hasTerm, this);\n        this.hasDifficultyLevel = bind(this.hasDifficultyLevel, this);\n        this.hasCountryAlpha2 = bind(this.hasCountryAlpha2, this);\n        this.resetTerm = bind(this.resetTerm, this);\n        this.resetDifficultyLevel = bind(this.resetDifficultyLevel, this);\n        this.resetCountryAlpha2 = bind(this.resetCountryAlpha2, this);\n        this.uiOnParamsChanged = bind(this.uiOnParamsChanged, this);\n        this.buildFilters();\n      }\n\n      return MainController;\n\n    })());\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').run(function($log) {\n    'ngInject';\n    return $log.debug('runBlock end');\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').config(function($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $urlRouterProvider.otherwise('/');\n    $stateProvider.state('main', {\n      url: '/',\n      templateUrl: 'app/main/main.html',\n      controller: 'MainController',\n      controllerAs: 'main',\n      resolve: {\n        countries: function($http) {\n          'ngInject';\n          return $http.get('data/countries.json').then(function(r) {\n            return r.data;\n          });\n        },\n        legislatures: function($http, countries) {\n          'ngInject';\n          return $http.get('data/legislatures.json').then(function(r) {\n            var i, legislature, len, ref;\n            ref = r.data;\n            for (i = 0, len = ref.length; i < len; i++) {\n              legislature = ref[i];\n              legislature.end_date = new Date(legislature.end_date);\n              legislature.start_date = new Date(legislature.start_date);\n              legislature.country = _.find(countries, {\n                alpha2: legislature.country\n              });\n              legislature.term = (legislature.start_date.getFullYear()) + \"-\" + (legislature.end_date.getFullYear());\n              legislature.display_name = legislature.name;\n              legislature.display_name += ' - ';\n              legislature.display_name += 'Completion rate: ';\n              legislature.display_name += ~~(legislature.completion * 1000) / 10;\n              legislature.display_name += '%';\n            }\n            return r.data;\n          });\n        }\n      }\n    });\n    return $stateProvider.state('main.chart', {\n      url: ':legislature_id_eq',\n      templateUrl: 'app/main/chart/chart.html',\n      controller: 'MainChartController',\n      controllerAs: 'chart',\n      params: {\n        topic: {\n          dynamic: true,\n          value: 'gender'\n        }\n      },\n      resolve: {\n        legislature_id: function($stateParams) {\n          'ngInject';\n          return 1 * $stateParams.legislature_id_eq;\n        },\n        legislature: function(legislatures, legislature_id) {\n          'ngInject';\n          return _.find(legislatures, {\n            id: legislature_id\n          });\n        },\n        summary: function($http, legislature_id) {\n          'ngInject';\n          return $http.get('data/summary-' + legislature_id + '.json').then(function(r) {\n            return r.data;\n          });\n        }\n      }\n    });\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').constant('topics', {\n    gender: {\n      groups: {\n        male: {\n          label: \"Male\"\n        },\n        female: {\n          label: \"Female\"\n        },\n        other: {\n          label: \"Other\"\n        }\n      }\n    },\n    age_range: {\n      groups: {\n        'bellow-30': {\n          label: 'Under 30',\n          order: 0\n        },\n        '30-40': {\n          label: '30 to 40',\n          order: 1\n        },\n        '40-50': {\n          label: '40 to 50',\n          order: 2\n        },\n        '50-60': {\n          label: '50 to 60',\n          order: 3\n        },\n        '60-70': {\n          label: '60 to 70',\n          order: 4\n        },\n        'over-70': {\n          label: 'Over 70',\n          order: 5\n        }\n      }\n    },\n    political_leaning: {\n      groups: {\n        'Left wing': {},\n        'Center-left (social democrat)': {},\n        'Green': {},\n        'Center (liberal)': {},\n        'Conservative': {},\n        'Far-right': {},\n        'Other': {}\n      }\n    },\n    profession_category: {\n      groups: {\n        'Armed forces': {},\n        'Private sector professional': {},\n        'Civil servant': {},\n        'Farmer': {},\n        'Journalist, public relations': {},\n        'Lawyer': {},\n        'Manual worker, craftsman/woman': {},\n        'Medical doctor, dentist, optician': {},\n        'Miner': {},\n        'Teacher': {},\n        'University professor': {},\n        'Student': {},\n        'No occupation': {},\n        'Other': {}\n      }\n    }\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('politicalGaps').config(function($logProvider, RestangularProvider) {\n    'ngInject';\n    $logProvider.debugEnabled(true);\n    RestangularProvider.setBaseUrl('http://www.jquestapp.com/political-gaps/api/v1/');\n    return RestangularProvider.setRestangularFields({\n      selfLink: '@id'\n    });\n  });\n\n}).call(this);\n\n\n\nangular.module(\"politicalGaps\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=main><form class=main__elastic ng-show=\\\"\\'main\\' | isState\\\"><div class=main__elastic__introduction><div class=container><h1>Political Gaps</h1><p class=lead>PoliticalGaps is the first investigation on <a href=http://www.jquestapp.com target=_blank>jQuest</a>, a platform for journalism schools that lets journalism students in Europe learn datajournalism, connect with one another and investigate collaboratively.</p><p class=lead>We are investigating the representativity of elected officials in assemblies all over Europe. The data you see here is live. The database will grow more complete as the academic year continues.</p></div></div><div class=main__elastic__filters><div class=container><div class=row><div class=col-xs-4><div class=main__elastic__filters__card><h4 class=main__elastic__filters__title><button class=\\\"btn btn-link btn-sm pull-xs-right\\\" ng-click=main.resetCountryAlpha2() ng-if=main.hasCountryAlpha2()>All</button> Country</h4><ul class=\\\"list-unstyled main__elastic__list main__elastic__list--country\\\"><li ng-repeat=\\\"country in ::main.countries\\\"><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleCountryAlpha2(country.alpha2) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isCountryAlpha2(country.alpha2),\\n                            \\'main__elastic__list__item--reduced\\': !main.someCountryAlpha2(country.alpha2)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchCountryAlpha2(country.alpha2).length }} </span>{{ country.name }}</a></li></ul></div></div><div class=col-xs-4><div class=main__elastic__filters__card><h4 class=main__elastic__filters__title><button class=\\\"btn btn-link btn-sm pull-xs-right\\\" ng-click=main.resetDifficultyLevel() ng-if=main.hasDifficultyLevel()>All</button> Administrative level</h4><ul class=\\\"list-unstyled main__elastic__list main__elastic__list--administrative-level\\\"><li ng-repeat=\\\"difficultyLevel in ::main.difficultyLevels\\\"><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleDifficultyLevel(difficultyLevel) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isDifficultyLevel(difficultyLevel),\\n                            \\'main__elastic__list__item--reduced\\': !main.someDifficultyLevel(difficultyLevel)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchDifficultyLevel(difficultyLevel).length }} </span>{{ main.administrativeLevels[difficultyLevel - 1] }}</a></li></ul></div></div><div class=col-xs-4><div class=main__elastic__filters__card><h4 class=main__elastic__filters__title><button class=\\\"btn btn-link btn-sm pull-xs-right\\\" ng-click=main.resetTerm() ng-if=main.hasTerm()>All</button> Term</h4><ul class=\\\"list-unstyled main__elastic__list main__elastic__list--term\\\"><li ng-repeat=\\\"term in main.terms | filter:main.isRecentTerm | filter:main.someTerm\\\"><div class=main__elastic__list__title ng-if=$first>Recent</div><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleTerm(term) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isTerm(term)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchTerm(term).length }} </span>{{ term }}</a></li><li ng-repeat=\\\"term in main.terms | filter:main.isOldTerm | filter:main.someTerm\\\"><div class=main__elastic__list__title ng-if=$first>Old</div><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleTerm(term) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isTerm(term)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchTerm(term).length }} </span>{{ term }}</a></li><li ng-repeat=\\\"term in main.terms | filter:main.isHistoricalTerm | filter:main.someTerm\\\"><div class=main__elastic__list__title ng-if=$first>Historical</div><a class=\\\"btn-block main__elastic__list__item\\\" ng-click=main.toggleTerm(term) ng-class=\\\"{\\n                            \\'main__elastic__list__item--active\\': main.isTerm(term)\\n                          }\\\"><span class=\\\"tag pull-xs-right\\\">{{ main.matchTerm(term).length }} </span>{{ term }}</a></li></ul></div></div></div></div><div class=main__elastic__filters__alert><div class=container><i class=\\\"fa fa-filter\\\"></i> There is {{ main.getFilteredLegislatures().length }} results that match with your filters.</div></div></div><div class=container><ul class=list-unstyled><li ng-repeat=\\\"legislature in main.getFilteredLegislatures()\\\" class=main__elastic__card><div class=pull-xs-right><button class=\\\"btn btn-link btn-outline\\\" ui-sref=\\\"main.chart({ legislature_id_eq: legislature.id })\\\">Visualize representativity</button></div><h5>{{ legislature.name_english }}</h5><p>{{ legislature.country.name }} - {{ legislature.term }} - Completed at {{ legislature.completion * 100 | number:0 }}%</p><div class=main__elastic__card__progress><div class=main__elastic__card__progress__bar ng-style=\\\"{ width: legislature.completion * 100 + \\'%\\' }\\\"></div></div></li></ul></div></form><div ui-view></div></div>\");\n$templateCache.put(\"app/main/chart/chart.html\",\"<div class=\\\"text-center main__heading\\\"><a class=main__heading__filters ui-sref=main><i class=\\\"fa fa-caret-down fa-fw\\\"></i> See the representativity of another assembly</a><div class=main__heading__title><h3>{{ chart.legislature.name_english }}</h3><p class=\\\"lead m-b-0\\\">{{ chart.legislature.country.name }} - {{ chart.legislature.term }} - Completed at {{ chart.legislature.completion * 100 | number:0 }}%</p></div><ul class=\\\"nav nav-pills main__heading__tabs\\\"><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'gender\\'})\\\" ui-sref-active=active>Gender</a></li><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'age_range\\'})\\\" ui-sref-active=active>Age</a></li><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'profession_category\\'})\\\" ui-sref-active=active>Occupation</a></li><li class=nav-item><a class=nav-link ui-sref=\\\"main.chart({topic: \\'political_leaning\\'})\\\" ui-sref-active=active>Political leaning</a></li></ul></div><div class=\\\"main__chart main__chart--{{ chart.topic }}\\\" main-chart summary=chart.summary topic=chart.topic></div>\");}]);"],"sourceRoot":"/source/"}